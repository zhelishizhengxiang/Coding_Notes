[二叉搜索树与双向链表_牛客题霸_牛客网](https://www.nowcoder.com/practice/947f6eb80d944a84850b0538bf0ec3a5?tpId=13&tqId=23253&sourceUrl=%2Fexam%2Foj%2Fta%3Fpage%3D1%26tpId%3D13%26type%3D13)

```java
import java.util.*;
/**
public class TreeNode {
    int val = 0;
    TreeNode left = null;
    TreeNode right = null;

    public TreeNode(int val) {
        this.val = val;

    }

}
*/
public class Solution {
    public TreeNode Convert(TreeNode pRootOfTree) {
        if(pRootOfTree==null)
            return null;
        //中序迭代遍历二叉搜索树+使用虚拟节点和前继节点来构造双向链表
        TreeNode shead=new TreeNode(-1);
        ArrayDeque<TreeNode> stack=new ArrayDeque<>();
        TreeNode pre=shead;
        TreeNode cur=pRootOfTree;
        while(cur!=null || !stack.isEmpty()){
            if(cur!=null){
                stack.push(cur);
                cur=cur.left;
            }else{
                cur=stack.pop();
                //构造链表
                pre.right=cur;
                cur.left=pre;
                //更新前继节点
                pre=pre.right;
                cur=cur.right;
            }
        }
        TreeNode res=shead.right;
        //让头节点与虚拟节点断链
        res.left=null;
        return res;

        
    }
}

```