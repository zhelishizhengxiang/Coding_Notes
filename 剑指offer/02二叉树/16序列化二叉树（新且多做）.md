[序列化二叉树_牛客题霸_牛客网](https://www.nowcoder.com/practice/cf7e25aa97c04cc1a68c8f040e71fb84?tpId=13&tqId=23455&sourceUrl=%2Fexam%2Foj%2Fta%3Fpage%3D1%26tpId%3D13%26type%3D13)


```java
import java.util.*;
/*
public class TreeNode {
    int val = 0;
    TreeNode left = null;
    TreeNode right = null;

    public TreeNode(int val) {
        this.val = val;

    }

}
*/
public class Solution {
    String Serialize(TreeNode root) {
        StringBuilder sb = new StringBuilder();
        if (root == null)
            return sb.toString();
        LinkedList<TreeNode> queue = new LinkedList<>();
        queue.offer(root);
        while (!queue.isEmpty()) {
            TreeNode node = queue.poll();
            //弹出来的时候在处理节点
            if(node==null)
                sb.append("#").append(',');
            else{
                sb.append(node.val).append(',');
                queue.offer(node.left);
                queue.offer(node.right);
            }
        }
        //去除最后的空节点
        while (sb.charAt(sb.length() - 2) == '#') {
            sb.deleteCharAt(sb.length() - 1);
            sb.deleteCharAt(sb.length() - 1);
        }
        //再取消最后的逗号
        sb.deleteCharAt(sb.length()-1);

        return sb.toString();
    }
    TreeNode Deserialize(String str) {
        //根据逗号进行分割
        if (str.length() == 0)
            return null;
        String[] strs = str.split(",");
        System.out.println(str);
        int index = 1;
        Deque<TreeNode> queue = new ArrayDeque<>();
        TreeNode root = new TreeNode(Integer.parseInt(strs[0]));
        queue.offer(root);
        while (index < strs.length && !queue.isEmpty()) {
            TreeNode node = queue.poll();
            System.out.println(node.val);
            if (index < strs.length && !strs[index].equals("#")) {
                    TreeNode newnode = new TreeNode(Integer.parseInt(strs[index]));
                    node.left = newnode;
                    queue.offer(newnode);
            }
            index++;

            if (index < strs.length && !strs[index].equals("#")) {
                    TreeNode newnode = new TreeNode(Integer.parseInt(strs[index]));
                    node.right = newnode;
                    queue.offer(newnode);
            }
            index++;
        }
        return root;
    }
}
```

